import{r as c,V as f,x as e,T as ee,B as w,H as pe}from"./index-t5rVtybA.js";import{i as U}from"./axios-tnHzrPy3.js";import{d as he}from"./dayjs.min-mMSNBr-8.js";import{F as l}from"./index-DKyXNU95.js";import{t as Re}from"./index-BL2yK6Nm.js";import{C as E}from"./index-HqdRO0mP.js";import{D as R}from"./index-DC0_n4Wa.js";import{R as j,C as n}from"./TextArea-BasEnP5_.js";import{S as W}from"./index-C9JDh5Qg.js";import{I as u}from"./index-C3SbKcBe.js";import{D as xe}from"./index-q4sPJRMG.js";import{T as M}from"./index-BxEfyn-m.js";import{R as Ne}from"./DeleteOutlined-DdstezQk.js";import{R as De}from"./MinusCircleOutlined-JipM_0B5.js";import{R as Ge}from"./PlusOutlined-CaKX0zvq.js";import{R as Oe}from"./SaveOutlined-BxbLw46A.js";import"./index-C1Z6Zlef.js";const $e=t=>({quotationCard:{borderRadius:t.borderRadiusXL,border:`1px solid ${t.colorBorderBg}`,backgroundColor:t.colorBgContainer},mainCardTitle:{color:t.colorPrimary,fontSize:t.fontSizeHeading2,fontWeight:t.fontWeightStronger,textAlign:"center",textTransform:"uppercase",letterSpacing:"1px"},businessInfoCard:{background:`linear-gradient(135deg, ${t.colorFillQuaternary} 0%, ${t.colorFillAlter} 100%)`,border:`1px solid ${t.colorBorderSecondary}`,borderRadius:t.borderRadiusLG,minHeight:"80px",boxShadow:t.boxShadowTertiary,display:"flex",alignItems:"center",transition:"all 0.3s ease-in-out","&:hover":{boxShadow:t.boxShadow,transform:"translateY(-2px)"}},businessInfoPre:{margin:0,whiteSpace:"pre-wrap",flexGrow:1,fontFamily:"monospace",fontSize:t.fontSizeSM,color:t.colorTextSecondary,lineHeight:t.lineHeightSM,opacity:.8},formField:{width:"100%",borderRadius:t.borderRadiusSM,borderColor:t.colorBorder,transition:"all 0.2s ease","&:hover":{borderColor:t.colorPrimaryBorder},"&:focus":{boxShadow:`0 0 0 2px ${t.colorPrimaryBorderHover}`}},readOnlyFormField:{width:"100%",color:t.colorTextDisabled,borderRadius:t.borderRadiusSM,background:t.colorFillQuaternary,cursor:"not-allowed"},textAreaField:{width:"100%",marginBottom:t.marginS,borderRadius:t.borderRadiusSM,borderColor:t.colorBorder},readOnlyTextArea:{width:"100%",marginBottom:t.marginS,borderRadius:t.borderRadiusSM,color:t.colorTextDisabled,background:t.colorFillQuaternary,cursor:"not-allowed"},divider:{borderColor:t.colorBorderSecondary,color:t.colorTextTertiary,fontWeight:t.fontWeightStrong},itemCard:{marginBottom:t.marginMD,border:`1px solid ${t.colorBorderSecondary}`,borderRadius:t.borderRadiusLG,backgroundColor:t.colorFillContentBackground,transition:"all 0.2s ease-in-out","&:hover":{boxShadow:t.boxShadowXl,transform:"translateY(-3px)"}},deleteButton:{height:"auto",display:"flex",alignItems:"center",justifyContent:"center",color:t.colorError,"&:hover":{color:t.colorErrorHover,background:t.colorErrorBg}},addButton:{height:"auto",display:"flex",alignItems:"center",justifyContent:"center",color:t.colorPrimary,borderColor:t.colorPrimaryBorder,"&:hover":{color:t.colorPrimaryHover,borderColor:t.colorPrimaryBorderHover,background:t.colorPrimaryBg}},addSpecButton:{marginTop:t.margin,borderRadius:t.borderRadiusSM,borderColor:t.colorBorderDashed,color:t.colorTextSecondary,"&:hover":{color:t.colorPrimaryText,borderColor:t.colorPrimary}},addItemButton:{marginTop:t.marginLG,borderRadius:t.borderRadiusSM,borderColor:t.colorPrimaryBorderDashed,color:t.colorPrimary,"&:hover":{background:t.colorPrimaryBgHover}},specificationRow:{marginBottom:t.marginXXS},summaryRow:{fontWeight:t.fontWeightStrong,borderTop:`1px dashed ${t.colorBorderSecondary}`,paddingTop:t.paddingMD,marginTop:t.marginLG},totalField:{width:"100%",borderRadius:t.borderRadiusSM,textAlign:"right",backgroundColor:t.colorFillTertiary,borderColor:t.colorBorder,color:t.colorText},grandTotalField:{width:"100%",borderRadius:t.borderRadiusSM,color:t.colorSuccess,fontSize:t.fontSizeHeading4,fontWeight:t.fontWeightStronger,textAlign:"right",backgroundColor:t.colorSuccessBg,borderColor:t.colorSuccessBorder},notesCard:{background:t.colorFillQuaternary,marginBottom:t.margin,borderRadius:t.borderRadiusLG,border:`1px solid ${t.colorBorderQuaternary}`},noteText:{margin:0,paddingBottom:t.paddingXXS,color:t.colorTextSecondary,fontSize:t.fontSizeSM,lineHeight:1.5},buttonGroup:{marginTop:t.marginLG,paddingTop:t.paddingMD,borderTop:`1px solid ${t.colorBorderSecondary}`,display:"flex",justifyContent:"flex-end",gap:t.marginSM}}),y=[];for(let t=0;t<256;++t)y.push((t+256).toString(16).slice(1));function Me(t,g=0){return(y[t[g+0]]+y[t[g+1]]+y[t[g+2]]+y[t[g+3]]+"-"+y[t[g+4]]+y[t[g+5]]+"-"+y[t[g+6]]+y[t[g+7]]+"-"+y[t[g+8]]+y[t[g+9]]+"-"+y[t[g+10]]+y[t[g+11]]+y[t[g+12]]+y[t[g+13]]+y[t[g+14]]+y[t[g+15]]).toLowerCase()}let re;const Ae=new Uint8Array(16);function qe(){if(!re){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");re=crypto.getRandomValues.bind(crypto)}return re(Ae)}const Le=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ge={randomUUID:Le};function v(t,g,m){var b;if(ge.randomUUID&&!t)return ge.randomUUID();t=t||{};const I=t.random??((b=t.rng)==null?void 0:b.call(t))??qe();if(I.length<16)throw new Error("Random bytes length must be >= 16");return I[6]=I[6]&15|64,I[8]=I[8]&63|128,Me(I)}const{Option:Y}=W,{TextArea:Q}=u,{useToken:Ue}=Re,lr=({onCancel:t,onSave:g,initialValues:m,isSaving:I})=>{const[b]=l.useForm(),[N,ye]=c.useState([]),[te,fe]=c.useState([]),[C,F]=c.useState([]),[A,je]=c.useState([]),[T,se]=c.useState(null),[H,oe]=c.useState(null),[D,z]=c.useState(null),[G,_]=c.useState(null),[q,X]=c.useState(null),[S,J]=c.useState(null),[be,Se]=c.useState("Draft"),{token:B}=Ue(),a=$e(B),[Ee,Ie]=c.useState([]),[Ye,Ce]=c.useState([]),K=c.useRef(!1),Z=c.useRef(!1),V=c.useRef(!1),k=c.useRef(!1),L=c.useCallback(r=>{var s,o;return r?`
${(s=r.businessName)==null?void 0:s.toUpperCase()}
${r.contactName?`Mr. ${(o=r.contactName)==null?void 0:o.toUpperCase()}`:""}
${r.addressLine1||""}${r.addressLine2?", "+r.addressLine2:""}
${r.city||""}${r.pincode?" - "+r.pincode:""}
${r.state||""}, ${r.country||""}
${r.gstNumber||""}
${r.email||""}`.trim():""},[]),ae=c.useCallback(async()=>{if(K.current)return;K.current=!0;const r=f.loading("Loading business options...");try{const s=await U.get("/api/accounts/");ye(s.data),f.success("Business options loaded",{id:r})}catch(s){f.error("Failed to load businesses",{id:r}),console.error("Error fetching business options:",s),K.current=!1}},[]),le=c.useCallback(async()=>{if(Z.current)return;Z.current=!0;const r=f.loading("Loading product options...");try{const s=await U.get("/api/product");fe(s.data.map(o=>({...o,productName:o.productName||o.name||"",hsnSac:o.hsnSac||"",quantityType:o.quantityType||"",options:o.options||[],gstPercentage:o.gstPercentage!==void 0?o.gstPercentage:18}))),f.success("Product options loaded",{id:r})}catch(s){f.error("Failed to load products",{id:r}),console.error("Error fetching product options:",s),Z.current=!1}},[]),ne=c.useCallback(async()=>{if(V.current)return;V.current=!0;const r=f.loading("Loading pipeline data...");try{const s=await U.get("/api/quotations/pipeline");Ie(s.data),f.success("Pipeline data loaded",{id:r})}catch(s){f.error("Failed to load pipeline data",{id:r}),console.error("Error fetching pipeline options:",s),V.current=!1}},[]),ie=c.useCallback(async()=>{if(k.current)return;k.current=!0;const r=f.loading("Loading customer details...");try{const s=await U.get("/api/accounts/customers");Ce(s.data),f.success("Customer details loaded",{id:r})}catch(s){f.error("Failed to load customer details",{id:r}),console.error("Error fetching customer details:",s),k.current=!1}},[]);c.useEffect(()=>{var r,s,o,p,x;if(ae(),le(),ne(),ie(),m){b.setFieldsValue({...m,date:m.date?he(m.date):null,validUntil:m.validUntil?he(m.validUntil):null,noteText:"",customerName:m.customerName||"",customerEmail:m.customerEmail||"",status:m.status||"Draft"});const i=(m.items||[]).map(h=>({...h,id:h.id||v(),productName:h.productName||"",gstPercentage:h.gstPercentage!==void 0?h.gstPercentage:18,specifications:(h.specifications||[]).map(P=>({...P,key:P.key||v()}))}));F(i),je(m.notes||[]),se(m.gstType||null),oe(((r=m.gstDetails)==null?void 0:r.manualGstAmount)||null),z(((s=m.gstDetails)==null?void 0:s.manualSgstPercentage)||null),_(((o=m.gstDetails)==null?void 0:o.manualCgstPercentage)||null),X(((p=m.gstDetails)==null?void 0:p.manualIgstPercentage)||null),Se(m.status||"Draft");const d=((x=m.businessId)==null?void 0:x._id)||m.businessId;if(d&&N.length>0){const h=N.find(P=>P._id===d);h&&(J(h),b.setFieldsValue({businessId:h._id,businessName:h.businessName,businessType:h.type,gstin:h.gstNumber,businessInfo:L(h)}))}}},[m,ae,le,ne,ie,b,L,N]);const Te=async r=>{var x,i;if(!C||C.length===0){f.error("At least one item is required.");return}if(!T){f.error("Please select a GST type.");return}for(const d of C)if(d.specifications&&d.specifications.length>0){for(const h of d.specifications)if(h.name.trim()||h.value.trim()){f.error("All specification name and value fields must be filled for all items.");return}}const s=new Date().toLocaleString(),o=r.noteText?{text:r.noteText,timestamp:s}:null,p={...r,date:(x=r.date)==null?void 0:x.format("YYYY-MM-DD"),validUntil:(i=r.validUntil)==null?void 0:i.format("YYYY-MM-DD"),items:C,notes:o?[...A,o]:A,gstType:T,status:be,manualGstAmount:H,manualSgstPercentage:D,manualCgstPercentage:G,manualIgstPercentage:q,businessName:S==null?void 0:S.businessName,businessType:S==null?void 0:S.type,gstin:S==null?void 0:S.gstNumber,businessInfo:S?L(S):"",customerName:r.customerName,customerEmail:r.customerEmail};try{await g(p)}catch(d){console.error("Error in QuotationForm onFinish:",d)}},ve=()=>F(r=>[...r,{id:v(),productId:null,productName:"",description:"",hsnSac:"",quantity:1,rate:0,quantityType:"",specifications:[{key:v(),name:"",value:""}]}]),Fe=r=>F(C.filter(s=>s.id!==r)),O=(r,s,o)=>{F(p=>p.map(x=>{if(x.id===r){if(s==="productId"){const i=te.find(d=>d._id===o);if(i){let d=x.specifications||[];const h=d.length===0||d.length===1&&d[0].name===""&&d[0].value==="";return i.options&&i.options.length>0&&h?d=i.options.map(P=>({key:v(),name:P.type||"",value:P.description||""})):(!i.options||i.options.length===0)&&d.length===0&&(d=[{key:v(),name:"",value:""}]),{...x,productId:o,productName:i.productName||i.name||"",description:i.description||"",hsnSac:i.hsnSac||"",rate:i.price||0,quantityType:i.quantityType||"",gstPercentage:i.gstPercentage!==void 0?i.gstPercentage:0,specifications:d}}else return{...x,productId:null,productName:"",description:"",hsnSac:"",rate:0,quantityType:"",gstPercentage:0,specifications:[{key:v(),name:"",value:""}]}}return{...x,[s]:o}}return x}))},de=r=>{F(s=>s.map(o=>o.id===r?{...o,specifications:[...o.specifications||[],{key:v(),name:"",value:""}]}:o))},Pe=(r,s)=>{F(o=>o.map(p=>p.id===r?{...p,specifications:(p.specifications||[]).filter(x=>x.key!==s)}:p))},ce=(r,s,o,p)=>{F(x=>x.map(i=>i.id===r?{...i,specifications:(i.specifications||[]).map(d=>d.key===s?{...d,[o]:p}:d)}:i))},ue=()=>C.reduce((r,s)=>r+(s.quantity||0)*(s.rate||0),0),me=()=>{let r=C.reduce((x,i)=>{const d=(i.quantity||0)*(i.rate||0),h=(i.gstPercentage||0)/100;return x+d*h},0),s=0,o=0,p=0;return T==="intrastate"?(s=r/2,o=r/2):T==="interstate"&&(p=r),{totalGst:r,sgst:s,cgst:o,igst:p}},we=()=>{const r=ue(),s=me();let o=0;if(H!==null)o=H;else if(T==="intrastate"&&(D!==null||G!==null)){const p=D!==null?r*(D/100):s.sgst,x=G!==null?r*(G/100):s.cgst;o=p+x}else T==="interstate"&&q!==null?o=r*(q/100):o=s.totalGst;return r+o},Be=r=>{const s=N.find(o=>o._id===r);if(s){J(s);const o=L(s);b.setFieldsValue({businessId:s._id,businessName:s.businessName,businessType:s.type,gstin:s.gstNumber,businessInfo:o})}else J(null),b.setFieldsValue({businessId:null,businessName:null,businessType:null,gstin:null,businessInfo:""})},$=me();return e.jsx(E,{title:e.jsx("span",{style:a.mainCardTitle,children:m?"Edit Quotation":"Create New Quotation"}),loading:I,style:a.quotationCard,children:e.jsxs(l,{form:b,layout:"vertical",onFinish:Te,children:[e.jsx(R,{style:a.divider,children:"Business Details"}),e.jsxs(j,{gutter:[16,24],children:[e.jsxs(n,{xs:24,md:12,children:[e.jsx(l.Item,{label:"Business Name",name:"businessId",rules:[{required:!0,message:"Please select a business!"}],children:e.jsx(W,{placeholder:"Select business",showSearch:!0,optionFilterProp:"children",filterOption:(r,s)=>((s==null?void 0:s.children)||"").toLowerCase().includes(r.toLowerCase()),onChange:Be,allowClear:!0,style:a.formField,children:N.map(r=>e.jsx(Y,{value:r._id,children:r.businessName},r._id))})}),e.jsx(l.Item,{name:"businessName",hidden:!0,children:e.jsx(u,{})})]}),e.jsx(n,{xs:24,md:12,children:e.jsx(l.Item,{label:"Business Info",children:e.jsx(E,{bordered:!0,style:a.businessInfoCard,children:e.jsx("pre",{style:a.businessInfoPre,children:b.getFieldValue("businessInfo")||"Select a business to view details..."})})})})]}),e.jsx(j,{gutter:[16]}),e.jsx(R,{style:a.divider,children:"Quotation Details"})," ",e.jsxs(j,{gutter:[16,24],children:[e.jsxs(n,{xs:24,md:8,children:[" ",e.jsx(l.Item,{name:"date",label:"Date",rules:[{required:!0,message:"Please select a date!"}],children:e.jsx(xe,{style:a.formField,format:"DD/MM/YYYY"})})]}),e.jsxs(n,{xs:24,md:8,children:[" ",e.jsx(l.Item,{name:"validUntil",label:"Valid Until",children:e.jsx(xe,{style:a.formField,format:"DD/MM/YYYY"})})]})]}),e.jsx(R,{style:a.divider,children:"Quotation Items"}),C.map(r=>e.jsxs(E,{style:a.itemCard,size:"small",children:[e.jsxs(j,{gutter:[16,16],align:"middle",children:[e.jsx(n,{xs:12,sm:8,children:e.jsx(l.Item,{label:"Product Name",children:e.jsx(W,{placeholder:"Search or select a product",showSearch:!0,optionFilterProp:"children",filterOption:(s,o)=>((o==null?void 0:o.children)||"").toLowerCase().includes(s.toLowerCase()),onChange:s=>O(r.id,"productId",s),value:r.productId,style:a.formField,allowClear:!0,children:te.map(s=>e.jsx(Y,{value:s._id,children:s.productName||s.name},s._id))})})}),e.jsx(n,{xs:12,sm:8,children:e.jsx(l.Item,{label:"Quantity",children:e.jsx(M,{placeholder:"1",value:r.quantity,onChange:s=>O(r.id,"quantity",s),style:a.formField,min:0})})}),e.jsx(n,{xs:12,sm:8,children:e.jsx(l.Item,{label:"Price (per unit)",children:e.jsx(M,{prefix:"₹",value:r.rate,onChange:s=>O(r.id,"rate",s),style:a.formField,min:0,precision:2})})}),e.jsx(n,{xs:14,sm:6,style:{display:"flex",justifyContent:"flex-end",alignItems:"center"},children:C.length>1&&e.jsx(ee,{title:"Remove Item",children:e.jsx(w,{icon:e.jsx(Ne,{}),danger:!0,onClick:()=>Fe(r.id),type:"text",style:a.deleteButton})})})]}),e.jsxs(j,{gutter:[16,16],style:{marginTop:B.marginS},children:[e.jsx(n,{xs:14,sm:8,children:e.jsx(l.Item,{label:"Description",children:e.jsx(Q,{placeholder:"Detailed description of the item",value:r.description,onChange:s=>O(r.id,"description",s.target.value),rows:2})})}),e.jsx(n,{xs:14,sm:8,children:e.jsx(l.Item,{label:"HSN/SAC Code",children:e.jsx(u,{placeholder:"HSN/SAC",value:r.hsnSac,onChange:s=>O(r.id,"hsnSac",s.target.value)})})}),e.jsx(n,{xs:24,sm:8,children:e.jsx(l.Item,{label:"Item Total",children:e.jsx(u,{readOnly:!0,value:`₹${((r.quantity||0)*(r.rate||0)).toFixed(2)}`,style:a.totalItemField})})})]}),r.specifications&&r.specifications.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(R,{orientation:"left",style:a.specificationDivider,children:"Specifications"}),r.specifications.map((s,o)=>e.jsxs(j,{gutter:16,style:a.specificationRow,align:"middle",children:[e.jsx(n,{xs:24,sm:10,children:e.jsx(l.Item,{label:"Specification Name",children:e.jsx(u,{placeholder:"e.g., Color",value:s.name,onChange:p=>ce(r.id,s.key,"name",p.target.value),style:a.formField})})}),e.jsx(n,{xs:24,sm:10,children:e.jsx(l.Item,{label:"Specification Value",children:e.jsx(u,{placeholder:"e.g., Blue",value:s.value,onChange:p=>ce(r.id,s.key,"value",p.target.value),style:a.formField})})}),e.jsx(n,{xs:24,sm:4,children:e.jsxs(pe,{children:[r.specifications.length>1&&e.jsx(ee,{title:"Remove Specification",children:e.jsx(w,{icon:e.jsx(De,{}),onClick:()=>Pe(r.id,s.key),type:"text",danger:!0,style:a.deleteButton})}),o===r.specifications.length-1&&e.jsx(ee,{title:"Add New Specification",children:e.jsx(w,{icon:e.jsx(Ge,{}),onClick:()=>de(r.id),type:"dashed",style:a.addButton})})]})})]},s.key))]}),(!r.specifications||r.specifications.length===0||r.specifications.length>0&&r.specifications[r.specifications.length-1].name&&r.specifications[r.specifications.length-1].value)&&e.jsx(w,{onClick:()=>de(r.id),block:!0,type:"dashed",style:a.addSpecButton,children:"+ Add Specification"})]},r.id)),e.jsx(w,{onClick:ve,block:!0,type:"dashed",style:a.addItemButton,children:"+ Add Another Item"}),e.jsx(R,{style:a.divider,children:"Quotation Summary"}),e.jsxs(j,{gutter:[16,16],children:[e.jsx(n,{xs:24,md:12,children:e.jsx(l.Item,{name:"gstType",label:"GST Type",rules:[{required:!0,message:"Please select a GST type!"}],children:e.jsxs(W,{placeholder:"Select GST calculation type",onChange:r=>{se(r),oe(null),z(null),_(null),X(null),b.setFieldsValue({manualGst:null,manualSgst:null,manualCgst:null,manualIgst:null})},value:T,style:a.formField,children:[e.jsx(Y,{value:"interstate",children:"Interstate - IGST"}),e.jsx(Y,{value:"intrastate",children:"Intrastate - SGST/CGST"})]})})}),e.jsx(n,{xs:24,md:12,children:e.jsx(l.Item,{label:"Sub Total",children:e.jsx(u,{readOnly:!0,value:`₹${ue().toFixed(2)}`,style:a.totalField})})})]}),T==="intrastate"&&e.jsxs(e.Fragment,{children:[e.jsxs(j,{gutter:[16,16],children:[e.jsx(n,{xs:24,sm:8,children:e.jsx(l.Item,{label:"Calculated SGST",children:e.jsx(u,{readOnly:!0,value:`₹${$.sgst.toFixed(2)}`,style:a.totalField})})}),e.jsx(n,{xs:24,sm:8,children:e.jsx(l.Item,{label:"Calculated CGST",children:e.jsx(u,{readOnly:!0,value:`₹${$.cgst.toFixed(2)}`,style:a.totalField})})}),e.jsx(n,{xs:24,sm:8,children:e.jsx(l.Item,{label:"Calculated Total GST",children:e.jsx(u,{readOnly:!0,value:`₹${$.totalGst.toFixed(2)}`,style:a.totalField})})})]}),e.jsxs(j,{gutter:[16,16],children:[e.jsx(n,{xs:24,sm:8,children:e.jsxs(l.Item,{label:"Manual SGST %",children:[" ",e.jsx(M,{value:D,onChange:r=>z(r),style:{...a.formField,backgroundColor:B.colorFillAlter,borderWidth:"2px",fontWeight:"bold"},min:0,max:100,precision:2,formatter:r=>`${r}%`,parser:r=>r.replace("%",""),placeholder:"Override SGST %"})]})}),e.jsx(n,{xs:24,sm:8,children:e.jsxs(l.Item,{label:"Manual CGST %",children:[" ",e.jsx(M,{value:G,onChange:r=>_(r),style:{...a.formField,backgroundColor:B.colorFillAlter,borderWidth:"2px",fontWeight:"bold"},min:0,max:100,precision:2,formatter:r=>`${r}%`,parser:r=>r.replace("%",""),placeholder:"Override CGST %"})]})})]})]}),T==="interstate"&&e.jsxs(j,{gutter:[16,16],children:[e.jsx(n,{xs:24,sm:12,children:e.jsx(l.Item,{label:"Calculated IGST",children:e.jsx(u,{readOnly:!0,value:`₹${$.igst.toFixed(2)}`,style:a.totalField})})}),e.jsx(n,{xs:24,sm:12,children:e.jsx(l.Item,{label:"Calculated Total GST",children:e.jsx(u,{readOnly:!0,value:`₹${$.totalGst.toFixed(2)}`,style:a.totalField})})}),e.jsx(n,{xs:24,sm:12,children:e.jsx(l.Item,{label:"Manual IGST %",children:e.jsx(M,{value:q,onChange:r=>X(r),style:{...a.formField,backgroundColor:B.colorFillAlter,borderWidth:"2px",fontWeight:"bold"},min:0,max:100,precision:2,formatter:r=>`${r}%`,parser:r=>r.replace("%",""),placeholder:"Override IGST %"})})})]}),e.jsxs(j,{gutter:[16,16],style:{marginTop:B.margin},children:[e.jsx(n,{xs:24,md:12,children:e.jsx(l.Item,{label:"Grand Total",children:e.jsx(u,{readOnly:!0,value:`₹${we().toFixed(2)}`,style:a.grandTotalField})})}),e.jsx(n,{xs:24,md:12,children:e.jsx(l.Item,{name:"noteText",label:"Add New Note",children:e.jsx(Q,{rows:3,style:a.textAreaField,placeholder:"Add any additional notes, terms, or conditions for this quotation..."})})})]}),A.length>0&&e.jsx(l.Item,{label:"Existing Notes",children:e.jsx(E,{style:a.notesCard,children:A.map((r,s)=>e.jsxs("p",{style:a.noteText,children:[e.jsxs("strong",{children:[r.timestamp,":"]})," ",r.text]},s))})}),e.jsx(R,{style:a.divider,children:"Terms and Conditions"}),e.jsxs(j,{gutter:[16,16],children:[e.jsx(n,{xs:24,md:12,children:e.jsx(l.Item,{name:"delivery",label:"Delivery Terms",children:e.jsx(u,{placeholder:"e.g., Within 7 days from PO"})})}),e.jsx(n,{xs:24,md:12,children:e.jsx(l.Item,{name:"warranty",label:"Warranty",children:e.jsx(u,{placeholder:"e.g., 1 year from date of delivery"})})}),e.jsx(n,{xs:24,md:12,children:e.jsx(l.Item,{name:"paymentTerms",label:"Payment Terms",children:e.jsx(u,{placeholder:"e.g., 50% advance, balance on delivery"})})}),e.jsx(n,{xs:24,md:12,children:e.jsx(l.Item,{name:"pricesTerms",label:"Price Terms",children:e.jsx(u,{placeholder:"e.g., Inclusive of all taxes"})})}),e.jsx(n,{xs:24,md:12,children:e.jsx(l.Item,{name:"ourPaymentTerms",label:"Our Payment Terms",children:e.jsx(u,{placeholder:"e.g., Net 30 days from invoice"})})}),e.jsx(n,{xs:24,md:12,children:e.jsx(l.Item,{name:"packingForwardingCharges",label:"Packing & Forwarding Charges",children:e.jsx(u,{placeholder:"e.g., ₹500 fixed"})})}),e.jsx(n,{xs:24,md:12,children:e.jsx(l.Item,{name:"transportationCharges",label:"Transportation Charges",children:e.jsx(u,{placeholder:"e.g., As per actuals"})})}),e.jsx(n,{xs:24,md:12,children:e.jsx(l.Item,{name:"transporterName",label:"Transporter Name",children:e.jsx(u,{placeholder:"e.g., ABC Logistics"})})}),e.jsx(n,{xs:24,md:12,children:e.jsx(l.Item,{name:"modePlaceDelivery",label:"Mode & Place of Delivery",children:e.jsx(u,{placeholder:"e.g., Road - Chennai"})})}),e.jsx(n,{xs:24,md:12,children:e.jsx(l.Item,{name:"offerValidity",label:"Offer Validity",children:e.jsx(u,{placeholder:"e.g., 30 days from quotation date"})})}),e.jsx(n,{xs:24,children:e.jsx(l.Item,{name:"customerScope",label:"Customer's Scope",children:e.jsx(Q,{rows:3,placeholder:"e.g., Civil work, Power supply, Internet setup..."})})}),e.jsx(n,{xs:24,children:e.jsx(l.Item,{name:"quotationNotes",label:"Quotation Notes",children:e.jsx(Q,{rows:3,placeholder:"e.g., Civil work, Power supply, Internet setup..."})})})]}),e.jsx(l.Item,{style:a.buttonGroup,children:e.jsxs(pe,{size:"middle",children:[e.jsx(w,{onClick:t,disabled:I,size:"large",children:"Cancel"}),e.jsx(w,{htmlType:"submit",type:"primary",style:{backgroundColor:"#ef7a1b",borderColor:"#orange",color:"white"},icon:e.jsx(Oe,{}),loading:I,size:"large",children:"Save Quotation"})]})})]})})};export{lr as default};
